{"ast":null,"code":"var _jsxFileName = \"/Users/pipi/Documents/pr/react_apps/shop/containers/Products/Products.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport ProductCard from 'components/ProductCard/ProductCard';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './Products.style';\nimport { CURRENCY } from 'helper/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport Button from 'components/Button/Button';\nimport Loader from 'components/Loader/Loader';\nimport Placeholder from 'components/Placeholder/Placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/NoResult/NoResult';\nimport Router from 'next/router';\nimport { GET_PRODUCTS } from 'graphql/query/product.query';\nimport { AuthContext } from 'contexts/auth/auth.context'; // import { getLocalState } from 'helper/localStorage';\n// import fakeDB from '../../helper/fakeDB';\n\nconst QuickView = dynamic(() => import('../QuickView/QuickView'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../QuickView/QuickView')],\n    modules: ['../QuickView/QuickView']\n  }\n});\nexport const Products = props => {\n  const {\n    deviceType,\n    type,\n    fetchLimit = 8,\n    loadMore = true\n  } = props; // console.log(type, \"Hello\")\n\n  const router = useRouter();\n  const {\n    0: loadingMore,\n    1: toggleLoading\n  } = useState(false);\n  let {\n    data,\n    error,\n    loading,\n    fetchMore\n  } = useQuery(GET_PRODUCTS, {\n    variables: {\n      type: router.query.type,\n      offset: 0,\n      limit: fetchLimit,\n      text: router.query.text,\n      category: router.query.category\n    }\n  }); // console.log(data)\n  // Quick View Modal\n\n  const handleModalClose = () => {\n    const as = router.asPath;\n    router.push(as, as, {\n      shallow: true\n    });\n    closeModal();\n  };\n\n  const handleQuickViewModal = (modalProps, deviceType, onModalClose) => {\n    if (router.pathname === '/product/[slug]') {\n      const as = `/product/${modalProps.slug}`;\n      router.push(router.pathname, as);\n      return;\n    }\n\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: {\n        modalProps,\n        deviceType,\n        onModalClose\n      },\n      closeComponent: 'div',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 900,\n        y: 30,\n        height: 'auto',\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0\n        }\n      }\n    });\n    const href = router.asPath;\n    const as = `/product/${modalProps.slug}`;\n    router.push(href, as, {\n      shallow: true\n    });\n  };\n\n  if (loading) {\n    return __jsx(LoaderWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, __jsx(LoaderItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    })), __jsx(LoaderItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    })), __jsx(LoaderItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  const {\n    authDispatch\n  } = useContext(AuthContext);\n\n  if (error) {\n    if (error.message === \"Network error: Failed to fetch\") {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 14\n        }\n      }, \"\\\"Network error!!!\\\"\");\n    }\n\n    if (error.message === \"GraphQL error: Error decoding signature\") {\n      Router.push('/logout');\n    } // console.log(error.message)\n\n\n    return null; // authDispatch({type:'SIGN_OUT'});\n    // return \"Error\"\n    // alert('Error' + error)\n  }\n\n  if (!data || !data.products || data.products.items.length === 0) {\n    return __jsx(NoResultFound, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const handleLoadMore = () => {\n    toggleLoading(true);\n    fetchMore({\n      variables: {\n        offset: Number(data.products.items.length),\n        limit: fetchLimit\n      },\n      updateQuery: (prev, {\n        fetchMoreResult\n      }) => {\n        toggleLoading(false);\n\n        if (!fetchMoreResult) {\n          return prev;\n        }\n\n        return {\n          products: {\n            __typename: prev.products.__typename,\n            items: [...prev.products.items, ...fetchMoreResult.products.items],\n            hasMore: fetchMoreResult.products.hasMore\n          }\n        };\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(ProductsRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }, data.products.items.map((item, index) => {\n    var _item$images$;\n\n    return __jsx(ProductsCol, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, (() => {\n      item.discountInPercent = item.discountPercent;\n    })(), __jsx(ProductCardWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, __jsx(Fade, {\n      duration: 800,\n      delay: index * 10,\n      style: {\n        height: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, __jsx(ProductCard, {\n      title: item.title,\n      description: item.description,\n      image: (_item$images$ = item.images[0]) === null || _item$images$ === void 0 ? void 0 : _item$images$.image,\n      weight: item.unit,\n      currency: CURRENCY,\n      price: item.price,\n      salePrice: item.salePrice,\n      discountInPercent: item.discountPercent,\n      data: item,\n      deviceType: deviceType,\n      link: '/product/' + item.slug,\n      onClick: () => handleQuickViewModal(item, deviceType, handleModalClose),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }))));\n  })), loadMore && data.hasMore && __jsx(ButtonWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    onClick: handleLoadMore,\n    title: \"Load More\",\n    intlButtonId: \"loadMoreBtn\",\n    size: \"small\",\n    isLoading: loadingMore,\n    loader: __jsx(Loader, {\n      color: \"#009E7F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }),\n    style: {\n      minWidth: 135,\n      backgroundColor: '#ffffff',\n      border: '1px solid #f1f1f1',\n      color: '#009E7F'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  })));\n};\nexport default Products;","map":{"version":3,"sources":["/Users/pipi/Documents/pr/react_apps/shop/containers/Products/Products.tsx"],"names":["React","useState","useContext","useRouter","dynamic","openModal","closeModal","ProductCard","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useQuery","Button","Loader","Placeholder","Fade","NoResultFound","Router","GET_PRODUCTS","AuthContext","QuickView","Products","props","deviceType","type","fetchLimit","loadMore","router","loadingMore","toggleLoading","data","error","loading","fetchMore","variables","query","offset","limit","text","category","handleModalClose","as","asPath","push","shallow","handleQuickViewModal","modalProps","onModalClose","pathname","slug","show","overlayClassName","closeOnClickOutside","component","componentProps","closeComponent","config","enableResizing","disableDragging","className","width","y","height","transition","mass","tension","friction","href","authDispatch","message","products","items","length","handleLoadMore","Number","updateQuery","prev","fetchMoreResult","__typename","hasMore","map","item","index","discountInPercent","discountPercent","title","description","images","image","unit","price","salePrice","minWidth","backgroundColor","border","color"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport ProductCard from 'components/ProductCard/ProductCard';\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from './Products.style';\nimport { CURRENCY } from 'helper/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport Button from 'components/Button/Button';\nimport Loader from 'components/Loader/Loader';\nimport Placeholder from 'components/Placeholder/Placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/NoResult/NoResult';\nimport Router from 'next/router';\nimport { GET_PRODUCTS } from 'graphql/query/product.query';\nimport { AuthContext } from 'contexts/auth/auth.context';\n// import { getLocalState } from 'helper/localStorage';\n// import fakeDB from '../../helper/fakeDB';\n\nconst QuickView = dynamic(() => import('../QuickView/QuickView'));\n\ntype ProductsProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  type?: string;\n  fetchLimit?: number;\n  loadMore?: boolean;\n};\nexport const Products: React.FC<ProductsProps> = (props) => {\n  const {\n    deviceType,\n    type,\n    fetchLimit = 8,\n    loadMore = true,\n  } = props;\n  // console.log(type, \"Hello\")\n  const router = useRouter(); \n  const [loadingMore, toggleLoading] = useState(false);\n  let { data, error, loading, fetchMore } = useQuery(GET_PRODUCTS, {\n    variables:{\n      type: router.query.type,\n      offset: 0,\n      limit: fetchLimit,\n      text:router.query.text,\n      category:router.query.category\n    },\n  });\n  // console.log(data)\n  // Quick View Modal\n  const handleModalClose = () => {\n    const as = router.asPath;\n    router.push(as, as, { shallow: true });\n    closeModal();\n  };\n\n  const handleQuickViewModal = (\n    modalProps: any,\n    deviceType: any,\n    onModalClose: any\n  ) => {\n    if (router.pathname === '/product/[slug]') {\n      const as = `/product/${modalProps.slug}`;\n      router.push(router.pathname, as);\n      return;\n    }\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: { modalProps, deviceType, onModalClose },\n      closeComponent: 'div',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 900,\n        y: 30,\n        height: 'auto',\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0,\n        },\n      },\n    });\n    const href = router.asPath;\n    const as = `/product/${modalProps.slug}`;\n    router.push(href, as, { shallow: true });\n  };\n\n  if (loading) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder />\n        </LoaderItem>\n      </LoaderWrapper>\n    );\n  }\n\n  \n  const {authDispatch} = useContext<any>(AuthContext)\n  if(error) {\n    if(error.message === \"Network error: Failed to fetch\"){\n      return <div>\"Network error!!!\"</div>\n    }\n    if(error.message === \"GraphQL error: Error decoding signature\"){\n      Router.push('/logout');\n    }\n    // console.log(error.message)\n    return null;\n    // authDispatch({type:'SIGN_OUT'});\n    // return \"Error\"\n    // alert('Error' + error)\n  }\n  if (!data || !data.products || data.products.items.length === 0) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    toggleLoading(true);\n    fetchMore({\n      variables: {\n        offset: Number(data.products.items.length),\n        limit: fetchLimit,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        toggleLoading(false);\n        if (!fetchMoreResult) {\n          return prev;\n        }\n        return {\n          products: {\n            __typename: prev.products.__typename,\n            items: [...prev.products.items, ...fetchMoreResult.products.items],\n            hasMore: fetchMoreResult.products.hasMore,\n          },\n        };\n      },\n    });\n  };\n\n  return (\n    <>\n      <ProductsRow>\n        {data.products.items.map((item: any, index: number) => (\n          <ProductsCol key={index}>\n            {/* {console.log(item.images)} */}\n            {(()=>{item.discountInPercent = item.discountPercent})()}\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: '100%' }}\n              >\n                <ProductCard\n                  title={item.title}\n                  description={item.description}\n                  image={item.images[0]?.image}\n                  weight={item.unit}\n                  currency={CURRENCY}\n                  price={item.price}\n                  salePrice={item.salePrice}\n                  discountInPercent={item.discountPercent}\n                  data={item}\n                  deviceType={deviceType}\n                  link={'/product/'+ item.slug}\n                  onClick={() =>\n                    handleQuickViewModal(item, deviceType, handleModalClose)\n                  }\n                />\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            title=\"Load More\"\n            intlButtonId=\"loadMoreBtn\"\n            size=\"small\"\n            isLoading={loadingMore}\n            loader={<Loader color=\"#009E7F\" />}\n            style={{\n              minWidth: 135,\n              backgroundColor: '#ffffff',\n              border: '1px solid #f1f1f1',\n              color: '#009E7F',\n            }}\n          />\n        </ButtonWrapper>\n      )}\n    </>\n  );\n};\nexport default (Products);\n"]},"metadata":{},"sourceType":"module"}